const db = require('../database/db.js')

const insert_post = db.prepare(/*sql*/ `
  INSERT INTO posts (user, postText)
  VALUES ($user, $postText)
  RETURNING user, user, postText, created_at
`)

function createPost(post) {
	return insert_post.get(post)
}

const delete_post = db.prepare(/*sql*/ `
  DELETE FROM posts WHERE id = ?
`)

function removePost(id) {
	delete_post.run(id)
}

function editPost(post) {
	return update_content.get(post)
}
const update_content = db.prepare(/*sql*/ `
  UPDATE posts
  SET postText = $postText
  WHERE id = $id
  RETURNING id, user, postText, created_at
`)

module.exports = { createPost, removePost, editPost }
